// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package edgeservices

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumiverse/pulumi-scaleway/sdk/go/scaleway/internal"
)

// Creates and manages Scaleway Edge Services TLS Stages.
//
// ## Example Usage
//
// ### Managed
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumiverse/pulumi-scaleway/sdk/go/scaleway/edgeservices"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := edgeservices.NewTlsStage(ctx, "main", &edgeservices.TlsStageArgs{
//				PipelineId:         pulumi.Any(mainScalewayEdgeServicesPipeline.Id),
//				ManagedCertificate: pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ### With a certificate stored in Scaleway Secret Manager
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumiverse/pulumi-scaleway/sdk/go/scaleway/edgeservices"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := edgeservices.NewTlsStage(ctx, "main", &edgeservices.TlsStageArgs{
//				PipelineId: pulumi.Any(mainScalewayEdgeServicesPipeline.Id),
//				Secrets: edgeservices.TlsStageSecretArray{
//					&edgeservices.TlsStageSecretArgs{
//						SecretId: pulumi.String("11111111-1111-1111-1111-111111111111"),
//						Region:   pulumi.String("fr-par"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// TLS stages can be imported using the `{id}`, e.g.
//
// bash
//
// ```sh
// $ pulumi import scaleway:edgeservices/tlsStage:TlsStage basic 11111111-1111-1111-1111-111111111111
// ```
type TlsStage struct {
	pulumi.CustomResourceState

	// The backend stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	BackendStageId pulumi.StringOutput `pulumi:"backendStageId"`
	// The cache stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	CacheStageId pulumi.StringOutput `pulumi:"cacheStageId"`
	// The expiration date of the certificate.
	CertificateExpiresAt pulumi.StringOutput `pulumi:"certificateExpiresAt"`
	// The date and time of the creation of the TLS stage.
	CreatedAt pulumi.StringOutput `pulumi:"createdAt"`
	// Set to true when Scaleway generates and manages a Let's Encrypt certificate for the TLS stage/custom endpoint.
	ManagedCertificate pulumi.BoolOutput `pulumi:"managedCertificate"`
	// The ID of the pipeline.
	PipelineId pulumi.StringOutput `pulumi:"pipelineId"`
	// `projectId`) The ID of the project the TLS stage is associated with.
	ProjectId pulumi.StringOutput `pulumi:"projectId"`
	// The route stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	RouteStageId pulumi.StringOutput `pulumi:"routeStageId"`
	// The TLS secrets.
	Secrets TlsStageSecretArrayOutput `pulumi:"secrets"`
	// The date and time of the last update of the TLS stage.
	UpdatedAt pulumi.StringOutput `pulumi:"updatedAt"`
	// The WAF stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	WafStageId pulumi.StringOutput `pulumi:"wafStageId"`
}

// NewTlsStage registers a new resource with the given unique name, arguments, and options.
func NewTlsStage(ctx *pulumi.Context,
	name string, args *TlsStageArgs, opts ...pulumi.ResourceOption) (*TlsStage, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.PipelineId == nil {
		return nil, errors.New("invalid value for required argument 'PipelineId'")
	}
	aliases := pulumi.Aliases([]pulumi.Alias{
		{
			Type: pulumi.String("scaleway:index/edgeServicesTlsStage:EdgeServicesTlsStage"),
		},
	})
	opts = append(opts, aliases)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource TlsStage
	err := ctx.RegisterResource("scaleway:edgeservices/tlsStage:TlsStage", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetTlsStage gets an existing TlsStage resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetTlsStage(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *TlsStageState, opts ...pulumi.ResourceOption) (*TlsStage, error) {
	var resource TlsStage
	err := ctx.ReadResource("scaleway:edgeservices/tlsStage:TlsStage", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering TlsStage resources.
type tlsStageState struct {
	// The backend stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	BackendStageId *string `pulumi:"backendStageId"`
	// The cache stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	CacheStageId *string `pulumi:"cacheStageId"`
	// The expiration date of the certificate.
	CertificateExpiresAt *string `pulumi:"certificateExpiresAt"`
	// The date and time of the creation of the TLS stage.
	CreatedAt *string `pulumi:"createdAt"`
	// Set to true when Scaleway generates and manages a Let's Encrypt certificate for the TLS stage/custom endpoint.
	ManagedCertificate *bool `pulumi:"managedCertificate"`
	// The ID of the pipeline.
	PipelineId *string `pulumi:"pipelineId"`
	// `projectId`) The ID of the project the TLS stage is associated with.
	ProjectId *string `pulumi:"projectId"`
	// The route stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	RouteStageId *string `pulumi:"routeStageId"`
	// The TLS secrets.
	Secrets []TlsStageSecret `pulumi:"secrets"`
	// The date and time of the last update of the TLS stage.
	UpdatedAt *string `pulumi:"updatedAt"`
	// The WAF stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	WafStageId *string `pulumi:"wafStageId"`
}

type TlsStageState struct {
	// The backend stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	BackendStageId pulumi.StringPtrInput
	// The cache stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	CacheStageId pulumi.StringPtrInput
	// The expiration date of the certificate.
	CertificateExpiresAt pulumi.StringPtrInput
	// The date and time of the creation of the TLS stage.
	CreatedAt pulumi.StringPtrInput
	// Set to true when Scaleway generates and manages a Let's Encrypt certificate for the TLS stage/custom endpoint.
	ManagedCertificate pulumi.BoolPtrInput
	// The ID of the pipeline.
	PipelineId pulumi.StringPtrInput
	// `projectId`) The ID of the project the TLS stage is associated with.
	ProjectId pulumi.StringPtrInput
	// The route stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	RouteStageId pulumi.StringPtrInput
	// The TLS secrets.
	Secrets TlsStageSecretArrayInput
	// The date and time of the last update of the TLS stage.
	UpdatedAt pulumi.StringPtrInput
	// The WAF stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	WafStageId pulumi.StringPtrInput
}

func (TlsStageState) ElementType() reflect.Type {
	return reflect.TypeOf((*tlsStageState)(nil)).Elem()
}

type tlsStageArgs struct {
	// The backend stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	BackendStageId *string `pulumi:"backendStageId"`
	// The cache stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	CacheStageId *string `pulumi:"cacheStageId"`
	// Set to true when Scaleway generates and manages a Let's Encrypt certificate for the TLS stage/custom endpoint.
	ManagedCertificate *bool `pulumi:"managedCertificate"`
	// The ID of the pipeline.
	PipelineId string `pulumi:"pipelineId"`
	// `projectId`) The ID of the project the TLS stage is associated with.
	ProjectId *string `pulumi:"projectId"`
	// The route stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	RouteStageId *string `pulumi:"routeStageId"`
	// The TLS secrets.
	Secrets []TlsStageSecret `pulumi:"secrets"`
	// The WAF stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	WafStageId *string `pulumi:"wafStageId"`
}

// The set of arguments for constructing a TlsStage resource.
type TlsStageArgs struct {
	// The backend stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	BackendStageId pulumi.StringPtrInput
	// The cache stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	CacheStageId pulumi.StringPtrInput
	// Set to true when Scaleway generates and manages a Let's Encrypt certificate for the TLS stage/custom endpoint.
	ManagedCertificate pulumi.BoolPtrInput
	// The ID of the pipeline.
	PipelineId pulumi.StringInput
	// `projectId`) The ID of the project the TLS stage is associated with.
	ProjectId pulumi.StringPtrInput
	// The route stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	RouteStageId pulumi.StringPtrInput
	// The TLS secrets.
	Secrets TlsStageSecretArrayInput
	// The WAF stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
	WafStageId pulumi.StringPtrInput
}

func (TlsStageArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*tlsStageArgs)(nil)).Elem()
}

type TlsStageInput interface {
	pulumi.Input

	ToTlsStageOutput() TlsStageOutput
	ToTlsStageOutputWithContext(ctx context.Context) TlsStageOutput
}

func (*TlsStage) ElementType() reflect.Type {
	return reflect.TypeOf((**TlsStage)(nil)).Elem()
}

func (i *TlsStage) ToTlsStageOutput() TlsStageOutput {
	return i.ToTlsStageOutputWithContext(context.Background())
}

func (i *TlsStage) ToTlsStageOutputWithContext(ctx context.Context) TlsStageOutput {
	return pulumi.ToOutputWithContext(ctx, i).(TlsStageOutput)
}

// TlsStageArrayInput is an input type that accepts TlsStageArray and TlsStageArrayOutput values.
// You can construct a concrete instance of `TlsStageArrayInput` via:
//
//	TlsStageArray{ TlsStageArgs{...} }
type TlsStageArrayInput interface {
	pulumi.Input

	ToTlsStageArrayOutput() TlsStageArrayOutput
	ToTlsStageArrayOutputWithContext(context.Context) TlsStageArrayOutput
}

type TlsStageArray []TlsStageInput

func (TlsStageArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*TlsStage)(nil)).Elem()
}

func (i TlsStageArray) ToTlsStageArrayOutput() TlsStageArrayOutput {
	return i.ToTlsStageArrayOutputWithContext(context.Background())
}

func (i TlsStageArray) ToTlsStageArrayOutputWithContext(ctx context.Context) TlsStageArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(TlsStageArrayOutput)
}

// TlsStageMapInput is an input type that accepts TlsStageMap and TlsStageMapOutput values.
// You can construct a concrete instance of `TlsStageMapInput` via:
//
//	TlsStageMap{ "key": TlsStageArgs{...} }
type TlsStageMapInput interface {
	pulumi.Input

	ToTlsStageMapOutput() TlsStageMapOutput
	ToTlsStageMapOutputWithContext(context.Context) TlsStageMapOutput
}

type TlsStageMap map[string]TlsStageInput

func (TlsStageMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*TlsStage)(nil)).Elem()
}

func (i TlsStageMap) ToTlsStageMapOutput() TlsStageMapOutput {
	return i.ToTlsStageMapOutputWithContext(context.Background())
}

func (i TlsStageMap) ToTlsStageMapOutputWithContext(ctx context.Context) TlsStageMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(TlsStageMapOutput)
}

type TlsStageOutput struct{ *pulumi.OutputState }

func (TlsStageOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**TlsStage)(nil)).Elem()
}

func (o TlsStageOutput) ToTlsStageOutput() TlsStageOutput {
	return o
}

func (o TlsStageOutput) ToTlsStageOutputWithContext(ctx context.Context) TlsStageOutput {
	return o
}

// The backend stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
func (o TlsStageOutput) BackendStageId() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.BackendStageId }).(pulumi.StringOutput)
}

// The cache stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
func (o TlsStageOutput) CacheStageId() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.CacheStageId }).(pulumi.StringOutput)
}

// The expiration date of the certificate.
func (o TlsStageOutput) CertificateExpiresAt() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.CertificateExpiresAt }).(pulumi.StringOutput)
}

// The date and time of the creation of the TLS stage.
func (o TlsStageOutput) CreatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.CreatedAt }).(pulumi.StringOutput)
}

// Set to true when Scaleway generates and manages a Let's Encrypt certificate for the TLS stage/custom endpoint.
func (o TlsStageOutput) ManagedCertificate() pulumi.BoolOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.BoolOutput { return v.ManagedCertificate }).(pulumi.BoolOutput)
}

// The ID of the pipeline.
func (o TlsStageOutput) PipelineId() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.PipelineId }).(pulumi.StringOutput)
}

// `projectId`) The ID of the project the TLS stage is associated with.
func (o TlsStageOutput) ProjectId() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.ProjectId }).(pulumi.StringOutput)
}

// The route stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
func (o TlsStageOutput) RouteStageId() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.RouteStageId }).(pulumi.StringOutput)
}

// The TLS secrets.
func (o TlsStageOutput) Secrets() TlsStageSecretArrayOutput {
	return o.ApplyT(func(v *TlsStage) TlsStageSecretArrayOutput { return v.Secrets }).(TlsStageSecretArrayOutput)
}

// The date and time of the last update of the TLS stage.
func (o TlsStageOutput) UpdatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.UpdatedAt }).(pulumi.StringOutput)
}

// The WAF stage ID the TLS stage will be linked to. Only one of `backendStageId`, `cacheStageId`, `routeStageId` and `wafStageId` should be specified.
func (o TlsStageOutput) WafStageId() pulumi.StringOutput {
	return o.ApplyT(func(v *TlsStage) pulumi.StringOutput { return v.WafStageId }).(pulumi.StringOutput)
}

type TlsStageArrayOutput struct{ *pulumi.OutputState }

func (TlsStageArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*TlsStage)(nil)).Elem()
}

func (o TlsStageArrayOutput) ToTlsStageArrayOutput() TlsStageArrayOutput {
	return o
}

func (o TlsStageArrayOutput) ToTlsStageArrayOutputWithContext(ctx context.Context) TlsStageArrayOutput {
	return o
}

func (o TlsStageArrayOutput) Index(i pulumi.IntInput) TlsStageOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *TlsStage {
		return vs[0].([]*TlsStage)[vs[1].(int)]
	}).(TlsStageOutput)
}

type TlsStageMapOutput struct{ *pulumi.OutputState }

func (TlsStageMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*TlsStage)(nil)).Elem()
}

func (o TlsStageMapOutput) ToTlsStageMapOutput() TlsStageMapOutput {
	return o
}

func (o TlsStageMapOutput) ToTlsStageMapOutputWithContext(ctx context.Context) TlsStageMapOutput {
	return o
}

func (o TlsStageMapOutput) MapIndex(k pulumi.StringInput) TlsStageOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *TlsStage {
		return vs[0].(map[string]*TlsStage)[vs[1].(string)]
	}).(TlsStageOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*TlsStageInput)(nil)).Elem(), &TlsStage{})
	pulumi.RegisterInputType(reflect.TypeOf((*TlsStageArrayInput)(nil)).Elem(), TlsStageArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*TlsStageMapInput)(nil)).Elem(), TlsStageMap{})
	pulumi.RegisterOutputType(TlsStageOutput{})
	pulumi.RegisterOutputType(TlsStageArrayOutput{})
	pulumi.RegisterOutputType(TlsStageMapOutput{})
}
