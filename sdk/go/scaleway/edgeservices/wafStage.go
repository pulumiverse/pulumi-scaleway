// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package edgeservices

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumiverse/pulumi-scaleway/sdk/go/scaleway/internal"
)

// Creates and manages Scaleway Edge Services WAF Stages.
//
// ## Example Usage
//
// ### Basic
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumiverse/pulumi-scaleway/sdk/go/scaleway/edgeservices"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := edgeservices.NewWafStage(ctx, "main", &edgeservices.WafStageArgs{
//				PipelineId:    pulumi.Any(mainScalewayEdgeServicesPipeline.Id),
//				Mode:          pulumi.String("enable"),
//				ParanoiaLevel: pulumi.Int(3),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// WAF stages can be imported using the `{id}`, e.g.
//
// bash
//
// ```sh
// $ pulumi import scaleway:edgeservices/wafStage:WafStage basic 11111111-1111-1111-1111-111111111111
// ```
type WafStage struct {
	pulumi.CustomResourceState

	// The ID of the backend stage to forward requests to after the WAF stage.
	BackendStageId pulumi.StringOutput `pulumi:"backendStageId"`
	// The date and time of the creation of the WAF stage.
	CreatedAt pulumi.StringOutput `pulumi:"createdAt"`
	// The mode defining WAF behavior (`disable`/`logOnly`/`enable`).
	Mode pulumi.StringOutput `pulumi:"mode"`
	// The sensitivity level (`1`,`2`,`3`,`4`) to use when classifying requests as malicious. With a high level, requests are more likely to be classed as malicious, and false positives are expected. With a lower level, requests are more likely to be classed as benign.
	ParanoiaLevel pulumi.IntOutput `pulumi:"paranoiaLevel"`
	// The ID of the pipeline.
	PipelineId pulumi.StringOutput `pulumi:"pipelineId"`
	// `projectId`) The ID of the project the WAF stage is associated with.
	ProjectId pulumi.StringOutput `pulumi:"projectId"`
	// The date and time of the last update of the WAF stage.
	UpdatedAt pulumi.StringOutput `pulumi:"updatedAt"`
}

// NewWafStage registers a new resource with the given unique name, arguments, and options.
func NewWafStage(ctx *pulumi.Context,
	name string, args *WafStageArgs, opts ...pulumi.ResourceOption) (*WafStage, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.ParanoiaLevel == nil {
		return nil, errors.New("invalid value for required argument 'ParanoiaLevel'")
	}
	if args.PipelineId == nil {
		return nil, errors.New("invalid value for required argument 'PipelineId'")
	}
	aliases := pulumi.Aliases([]pulumi.Alias{
		{
			Type: pulumi.String("scaleway:index/edgeServicesWafStage:EdgeServicesWafStage"),
		},
	})
	opts = append(opts, aliases)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource WafStage
	err := ctx.RegisterResource("scaleway:edgeservices/wafStage:WafStage", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetWafStage gets an existing WafStage resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetWafStage(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *WafStageState, opts ...pulumi.ResourceOption) (*WafStage, error) {
	var resource WafStage
	err := ctx.ReadResource("scaleway:edgeservices/wafStage:WafStage", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering WafStage resources.
type wafStageState struct {
	// The ID of the backend stage to forward requests to after the WAF stage.
	BackendStageId *string `pulumi:"backendStageId"`
	// The date and time of the creation of the WAF stage.
	CreatedAt *string `pulumi:"createdAt"`
	// The mode defining WAF behavior (`disable`/`logOnly`/`enable`).
	Mode *string `pulumi:"mode"`
	// The sensitivity level (`1`,`2`,`3`,`4`) to use when classifying requests as malicious. With a high level, requests are more likely to be classed as malicious, and false positives are expected. With a lower level, requests are more likely to be classed as benign.
	ParanoiaLevel *int `pulumi:"paranoiaLevel"`
	// The ID of the pipeline.
	PipelineId *string `pulumi:"pipelineId"`
	// `projectId`) The ID of the project the WAF stage is associated with.
	ProjectId *string `pulumi:"projectId"`
	// The date and time of the last update of the WAF stage.
	UpdatedAt *string `pulumi:"updatedAt"`
}

type WafStageState struct {
	// The ID of the backend stage to forward requests to after the WAF stage.
	BackendStageId pulumi.StringPtrInput
	// The date and time of the creation of the WAF stage.
	CreatedAt pulumi.StringPtrInput
	// The mode defining WAF behavior (`disable`/`logOnly`/`enable`).
	Mode pulumi.StringPtrInput
	// The sensitivity level (`1`,`2`,`3`,`4`) to use when classifying requests as malicious. With a high level, requests are more likely to be classed as malicious, and false positives are expected. With a lower level, requests are more likely to be classed as benign.
	ParanoiaLevel pulumi.IntPtrInput
	// The ID of the pipeline.
	PipelineId pulumi.StringPtrInput
	// `projectId`) The ID of the project the WAF stage is associated with.
	ProjectId pulumi.StringPtrInput
	// The date and time of the last update of the WAF stage.
	UpdatedAt pulumi.StringPtrInput
}

func (WafStageState) ElementType() reflect.Type {
	return reflect.TypeOf((*wafStageState)(nil)).Elem()
}

type wafStageArgs struct {
	// The ID of the backend stage to forward requests to after the WAF stage.
	BackendStageId *string `pulumi:"backendStageId"`
	// The mode defining WAF behavior (`disable`/`logOnly`/`enable`).
	Mode *string `pulumi:"mode"`
	// The sensitivity level (`1`,`2`,`3`,`4`) to use when classifying requests as malicious. With a high level, requests are more likely to be classed as malicious, and false positives are expected. With a lower level, requests are more likely to be classed as benign.
	ParanoiaLevel int `pulumi:"paranoiaLevel"`
	// The ID of the pipeline.
	PipelineId string `pulumi:"pipelineId"`
	// `projectId`) The ID of the project the WAF stage is associated with.
	ProjectId *string `pulumi:"projectId"`
}

// The set of arguments for constructing a WafStage resource.
type WafStageArgs struct {
	// The ID of the backend stage to forward requests to after the WAF stage.
	BackendStageId pulumi.StringPtrInput
	// The mode defining WAF behavior (`disable`/`logOnly`/`enable`).
	Mode pulumi.StringPtrInput
	// The sensitivity level (`1`,`2`,`3`,`4`) to use when classifying requests as malicious. With a high level, requests are more likely to be classed as malicious, and false positives are expected. With a lower level, requests are more likely to be classed as benign.
	ParanoiaLevel pulumi.IntInput
	// The ID of the pipeline.
	PipelineId pulumi.StringInput
	// `projectId`) The ID of the project the WAF stage is associated with.
	ProjectId pulumi.StringPtrInput
}

func (WafStageArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*wafStageArgs)(nil)).Elem()
}

type WafStageInput interface {
	pulumi.Input

	ToWafStageOutput() WafStageOutput
	ToWafStageOutputWithContext(ctx context.Context) WafStageOutput
}

func (*WafStage) ElementType() reflect.Type {
	return reflect.TypeOf((**WafStage)(nil)).Elem()
}

func (i *WafStage) ToWafStageOutput() WafStageOutput {
	return i.ToWafStageOutputWithContext(context.Background())
}

func (i *WafStage) ToWafStageOutputWithContext(ctx context.Context) WafStageOutput {
	return pulumi.ToOutputWithContext(ctx, i).(WafStageOutput)
}

// WafStageArrayInput is an input type that accepts WafStageArray and WafStageArrayOutput values.
// You can construct a concrete instance of `WafStageArrayInput` via:
//
//	WafStageArray{ WafStageArgs{...} }
type WafStageArrayInput interface {
	pulumi.Input

	ToWafStageArrayOutput() WafStageArrayOutput
	ToWafStageArrayOutputWithContext(context.Context) WafStageArrayOutput
}

type WafStageArray []WafStageInput

func (WafStageArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*WafStage)(nil)).Elem()
}

func (i WafStageArray) ToWafStageArrayOutput() WafStageArrayOutput {
	return i.ToWafStageArrayOutputWithContext(context.Background())
}

func (i WafStageArray) ToWafStageArrayOutputWithContext(ctx context.Context) WafStageArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(WafStageArrayOutput)
}

// WafStageMapInput is an input type that accepts WafStageMap and WafStageMapOutput values.
// You can construct a concrete instance of `WafStageMapInput` via:
//
//	WafStageMap{ "key": WafStageArgs{...} }
type WafStageMapInput interface {
	pulumi.Input

	ToWafStageMapOutput() WafStageMapOutput
	ToWafStageMapOutputWithContext(context.Context) WafStageMapOutput
}

type WafStageMap map[string]WafStageInput

func (WafStageMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*WafStage)(nil)).Elem()
}

func (i WafStageMap) ToWafStageMapOutput() WafStageMapOutput {
	return i.ToWafStageMapOutputWithContext(context.Background())
}

func (i WafStageMap) ToWafStageMapOutputWithContext(ctx context.Context) WafStageMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(WafStageMapOutput)
}

type WafStageOutput struct{ *pulumi.OutputState }

func (WafStageOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**WafStage)(nil)).Elem()
}

func (o WafStageOutput) ToWafStageOutput() WafStageOutput {
	return o
}

func (o WafStageOutput) ToWafStageOutputWithContext(ctx context.Context) WafStageOutput {
	return o
}

// The ID of the backend stage to forward requests to after the WAF stage.
func (o WafStageOutput) BackendStageId() pulumi.StringOutput {
	return o.ApplyT(func(v *WafStage) pulumi.StringOutput { return v.BackendStageId }).(pulumi.StringOutput)
}

// The date and time of the creation of the WAF stage.
func (o WafStageOutput) CreatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *WafStage) pulumi.StringOutput { return v.CreatedAt }).(pulumi.StringOutput)
}

// The mode defining WAF behavior (`disable`/`logOnly`/`enable`).
func (o WafStageOutput) Mode() pulumi.StringOutput {
	return o.ApplyT(func(v *WafStage) pulumi.StringOutput { return v.Mode }).(pulumi.StringOutput)
}

// The sensitivity level (`1`,`2`,`3`,`4`) to use when classifying requests as malicious. With a high level, requests are more likely to be classed as malicious, and false positives are expected. With a lower level, requests are more likely to be classed as benign.
func (o WafStageOutput) ParanoiaLevel() pulumi.IntOutput {
	return o.ApplyT(func(v *WafStage) pulumi.IntOutput { return v.ParanoiaLevel }).(pulumi.IntOutput)
}

// The ID of the pipeline.
func (o WafStageOutput) PipelineId() pulumi.StringOutput {
	return o.ApplyT(func(v *WafStage) pulumi.StringOutput { return v.PipelineId }).(pulumi.StringOutput)
}

// `projectId`) The ID of the project the WAF stage is associated with.
func (o WafStageOutput) ProjectId() pulumi.StringOutput {
	return o.ApplyT(func(v *WafStage) pulumi.StringOutput { return v.ProjectId }).(pulumi.StringOutput)
}

// The date and time of the last update of the WAF stage.
func (o WafStageOutput) UpdatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *WafStage) pulumi.StringOutput { return v.UpdatedAt }).(pulumi.StringOutput)
}

type WafStageArrayOutput struct{ *pulumi.OutputState }

func (WafStageArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*WafStage)(nil)).Elem()
}

func (o WafStageArrayOutput) ToWafStageArrayOutput() WafStageArrayOutput {
	return o
}

func (o WafStageArrayOutput) ToWafStageArrayOutputWithContext(ctx context.Context) WafStageArrayOutput {
	return o
}

func (o WafStageArrayOutput) Index(i pulumi.IntInput) WafStageOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *WafStage {
		return vs[0].([]*WafStage)[vs[1].(int)]
	}).(WafStageOutput)
}

type WafStageMapOutput struct{ *pulumi.OutputState }

func (WafStageMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*WafStage)(nil)).Elem()
}

func (o WafStageMapOutput) ToWafStageMapOutput() WafStageMapOutput {
	return o
}

func (o WafStageMapOutput) ToWafStageMapOutputWithContext(ctx context.Context) WafStageMapOutput {
	return o
}

func (o WafStageMapOutput) MapIndex(k pulumi.StringInput) WafStageOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *WafStage {
		return vs[0].(map[string]*WafStage)[vs[1].(string)]
	}).(WafStageOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*WafStageInput)(nil)).Elem(), &WafStage{})
	pulumi.RegisterInputType(reflect.TypeOf((*WafStageArrayInput)(nil)).Elem(), WafStageArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*WafStageMapInput)(nil)).Elem(), WafStageMap{})
	pulumi.RegisterOutputType(WafStageOutput{})
	pulumi.RegisterOutputType(WafStageArrayOutput{})
	pulumi.RegisterOutputType(WafStageMapOutput{})
}
