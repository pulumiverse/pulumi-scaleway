// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as utilities from "../utilities";

/**
 * Creates and manages Scaleway Redis™ clusters.
 * For more information refer to the [API documentation](https://www.scaleway.com/en/developers/api/managed-database-redis).
 *
 * ## Example Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as scaleway from "@pulumiverse/scaleway";
 *
 * //## Basic Redis cluster creation
 * const main = new scaleway.redis.Cluster("main", {
 *     name: "test_redis_basic",
 *     version: "6.2.7",
 *     nodeType: "RED1-MICRO",
 *     userName: "my_initial_user",
 *     password: "thiZ_is_v&ry_s3cret",
 *     tags: [
 *         "test",
 *         "redis",
 *     ],
 *     clusterSize: 1,
 *     tlsEnabled: true,
 *     acls: [{
 *         ip: "0.0.0.0/0",
 *         description: "Allow all",
 *     }],
 * });
 * ```
 *
 * ## Import
 *
 * Redis™ cluster can be imported using the `{zone}/{id}`, e.g.
 *
 * bash
 *
 * ```sh
 * $ pulumi import scaleway:redis/cluster:Cluster main fr-par-1/11111111-1111-1111-1111-111111111111
 * ```
 */
export class Cluster extends pulumi.CustomResource {
    /**
     * Get an existing Cluster resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ClusterState, opts?: pulumi.CustomResourceOptions): Cluster {
        return new Cluster(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'scaleway:redis/cluster:Cluster';

    /**
     * Returns true if the given object is an instance of Cluster.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is Cluster {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === Cluster.__pulumiType;
    }

    /**
     * List of acl rules, this is cluster's authorized IPs. More details on the ACL section.
     */
    declare public readonly acls: pulumi.Output<outputs.redis.ClusterAcl[] | undefined>;
    /**
     * The PEM of the certificate used by redis, only when `tlsEnabled` is true
     */
    declare public /*out*/ readonly certificate: pulumi.Output<string>;
    /**
     * The number of nodes in the Redis™ cluster.
     *
     * > **Important:**
     *
     * - Cluster_size = 1 for Standalone mode (single node).
     *
     * - Cluster_size = 2 for High Availability (HA) mode, with 1 main node and 1 standby node.
     *
     * - Cluster_size >= 3 for Cluster mode, which requires a minimum of 1 main node and 2 secondary nodes.
     *
     * > **Important:** If you are using the cluster mode (>=3 nodes), you can set a bigger `clusterSize` than you initially
     * did, it will migrate the Redis™ cluster but keep in mind that you cannot downgrade a Redis™ cluster, so setting a smaller
     * `clusterSize` will destroy and recreate your cluster.
     *
     * > **Important:** If you are using the Standalone mode (1 node), setting a bigger `clusterSize` will destroy and
     * recreate your cluster as you will be switching to the cluster mode.
     */
    declare public readonly clusterSize: pulumi.Output<number>;
    /**
     * The date and time of creation of the Redis™ cluster.
     */
    declare public /*out*/ readonly createdAt: pulumi.Output<string>;
    /**
     * The name of the Redis™ cluster.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * The type of Redis™ cluster you want to create (e.g. `RED1-M`).
     *
     * > **Important:** Updates to `nodeType` will migrate the Redis™ cluster to the desired `nodeType`. Keep in mind that
     * you cannot downgrade a Redis™ cluster.
     */
    declare public readonly nodeType: pulumi.Output<string>;
    /**
     * Password for the first user of the Redis™ cluster. Only one of `password` or `passwordWo` should be specified.
     */
    declare public readonly password: pulumi.Output<string | undefined>;
    /**
     * **NOTE:** This field is write-only and its value will not be updated in state as part of read operations.
     */
    declare public readonly passwordWo: pulumi.Output<string | undefined>;
    /**
     * The version of the write-only password. To update the `passwordWo`, you must also update the `passwordWoVersion`.
     */
    declare public readonly passwordWoVersion: pulumi.Output<number | undefined>;
    /**
     * The list of private IPv4 addresses associated with the resource.
     */
    declare public readonly privateIps: pulumi.Output<outputs.redis.ClusterPrivateIp[]>;
    /**
     * Describes the Private Network you want to connect to your cluster. If not set, a public
     * network will be provided. More details on the Private Network section
     */
    declare public readonly privateNetworks: pulumi.Output<outputs.redis.ClusterPrivateNetwork[] | undefined>;
    /**
     * `projectId`) The ID of the project the Redis™ cluster is
     * associated with.
     */
    declare public readonly projectId: pulumi.Output<string>;
    /**
     * (Optional) Public network details. Only one of `privateNetwork` and `publicNetwork` may be set.
     * > The `publicNetwork` block exports:
     */
    declare public readonly publicNetwork: pulumi.Output<outputs.redis.ClusterPublicNetwork>;
    /**
     * Map of settings for Redis™ cluster. Available settings can be found by listing Redis™ versions
     * with scaleway API or CLI
     */
    declare public readonly settings: pulumi.Output<{[key: string]: string} | undefined>;
    /**
     * The tags associated with the Redis™ cluster.
     */
    declare public readonly tags: pulumi.Output<string[] | undefined>;
    /**
     * Whether TLS is enabled or not.
     *
     * > The changes on `tlsEnabled` will force the resource creation.
     */
    declare public readonly tlsEnabled: pulumi.Output<boolean | undefined>;
    /**
     * The date and time of the last update of the Redis™ cluster.
     */
    declare public /*out*/ readonly updatedAt: pulumi.Output<string>;
    /**
     * Identifier for the first user of the Redis™ cluster.
     */
    declare public readonly userName: pulumi.Output<string>;
    /**
     * Redis™ cluster's version (e.g. `6.2.7`).
     *
     * > **Important:** Updates to `version` will migrate the Redis™ cluster to the desired `version`. Keep in mind that you
     * cannot downgrade a Redis™ cluster.
     */
    declare public readonly version: pulumi.Output<string>;
    /**
     * `zone`) The zone in which the
     * Redis™ cluster should be created.
     */
    declare public readonly zone: pulumi.Output<string | undefined>;

    /**
     * Create a Cluster resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: ClusterArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ClusterArgs | ClusterState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ClusterState | undefined;
            resourceInputs["acls"] = state?.acls;
            resourceInputs["certificate"] = state?.certificate;
            resourceInputs["clusterSize"] = state?.clusterSize;
            resourceInputs["createdAt"] = state?.createdAt;
            resourceInputs["name"] = state?.name;
            resourceInputs["nodeType"] = state?.nodeType;
            resourceInputs["password"] = state?.password;
            resourceInputs["passwordWo"] = state?.passwordWo;
            resourceInputs["passwordWoVersion"] = state?.passwordWoVersion;
            resourceInputs["privateIps"] = state?.privateIps;
            resourceInputs["privateNetworks"] = state?.privateNetworks;
            resourceInputs["projectId"] = state?.projectId;
            resourceInputs["publicNetwork"] = state?.publicNetwork;
            resourceInputs["settings"] = state?.settings;
            resourceInputs["tags"] = state?.tags;
            resourceInputs["tlsEnabled"] = state?.tlsEnabled;
            resourceInputs["updatedAt"] = state?.updatedAt;
            resourceInputs["userName"] = state?.userName;
            resourceInputs["version"] = state?.version;
            resourceInputs["zone"] = state?.zone;
        } else {
            const args = argsOrState as ClusterArgs | undefined;
            if (args?.nodeType === undefined && !opts.urn) {
                throw new Error("Missing required property 'nodeType'");
            }
            if (args?.userName === undefined && !opts.urn) {
                throw new Error("Missing required property 'userName'");
            }
            if (args?.version === undefined && !opts.urn) {
                throw new Error("Missing required property 'version'");
            }
            resourceInputs["acls"] = args?.acls;
            resourceInputs["clusterSize"] = args?.clusterSize;
            resourceInputs["name"] = args?.name;
            resourceInputs["nodeType"] = args?.nodeType;
            resourceInputs["password"] = args?.password ? pulumi.secret(args.password) : undefined;
            resourceInputs["passwordWo"] = args?.passwordWo ? pulumi.secret(args.passwordWo) : undefined;
            resourceInputs["passwordWoVersion"] = args?.passwordWoVersion;
            resourceInputs["privateIps"] = args?.privateIps;
            resourceInputs["privateNetworks"] = args?.privateNetworks;
            resourceInputs["projectId"] = args?.projectId;
            resourceInputs["publicNetwork"] = args?.publicNetwork;
            resourceInputs["settings"] = args?.settings;
            resourceInputs["tags"] = args?.tags;
            resourceInputs["tlsEnabled"] = args?.tlsEnabled;
            resourceInputs["userName"] = args?.userName;
            resourceInputs["version"] = args?.version;
            resourceInputs["zone"] = args?.zone;
            resourceInputs["certificate"] = undefined /*out*/;
            resourceInputs["createdAt"] = undefined /*out*/;
            resourceInputs["updatedAt"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const aliasOpts = { aliases: [{ type: "scaleway:index/redisCluster:RedisCluster" }] };
        opts = pulumi.mergeOptions(opts, aliasOpts);
        const secretOpts = { additionalSecretOutputs: ["password", "passwordWo"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(Cluster.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering Cluster resources.
 */
export interface ClusterState {
    /**
     * List of acl rules, this is cluster's authorized IPs. More details on the ACL section.
     */
    acls?: pulumi.Input<pulumi.Input<inputs.redis.ClusterAcl>[]>;
    /**
     * The PEM of the certificate used by redis, only when `tlsEnabled` is true
     */
    certificate?: pulumi.Input<string>;
    /**
     * The number of nodes in the Redis™ cluster.
     *
     * > **Important:**
     *
     * - Cluster_size = 1 for Standalone mode (single node).
     *
     * - Cluster_size = 2 for High Availability (HA) mode, with 1 main node and 1 standby node.
     *
     * - Cluster_size >= 3 for Cluster mode, which requires a minimum of 1 main node and 2 secondary nodes.
     *
     * > **Important:** If you are using the cluster mode (>=3 nodes), you can set a bigger `clusterSize` than you initially
     * did, it will migrate the Redis™ cluster but keep in mind that you cannot downgrade a Redis™ cluster, so setting a smaller
     * `clusterSize` will destroy and recreate your cluster.
     *
     * > **Important:** If you are using the Standalone mode (1 node), setting a bigger `clusterSize` will destroy and
     * recreate your cluster as you will be switching to the cluster mode.
     */
    clusterSize?: pulumi.Input<number>;
    /**
     * The date and time of creation of the Redis™ cluster.
     */
    createdAt?: pulumi.Input<string>;
    /**
     * The name of the Redis™ cluster.
     */
    name?: pulumi.Input<string>;
    /**
     * The type of Redis™ cluster you want to create (e.g. `RED1-M`).
     *
     * > **Important:** Updates to `nodeType` will migrate the Redis™ cluster to the desired `nodeType`. Keep in mind that
     * you cannot downgrade a Redis™ cluster.
     */
    nodeType?: pulumi.Input<string>;
    /**
     * Password for the first user of the Redis™ cluster. Only one of `password` or `passwordWo` should be specified.
     */
    password?: pulumi.Input<string>;
    /**
     * **NOTE:** This field is write-only and its value will not be updated in state as part of read operations.
     */
    passwordWo?: pulumi.Input<string>;
    /**
     * The version of the write-only password. To update the `passwordWo`, you must also update the `passwordWoVersion`.
     */
    passwordWoVersion?: pulumi.Input<number>;
    /**
     * The list of private IPv4 addresses associated with the resource.
     */
    privateIps?: pulumi.Input<pulumi.Input<inputs.redis.ClusterPrivateIp>[]>;
    /**
     * Describes the Private Network you want to connect to your cluster. If not set, a public
     * network will be provided. More details on the Private Network section
     */
    privateNetworks?: pulumi.Input<pulumi.Input<inputs.redis.ClusterPrivateNetwork>[]>;
    /**
     * `projectId`) The ID of the project the Redis™ cluster is
     * associated with.
     */
    projectId?: pulumi.Input<string>;
    /**
     * (Optional) Public network details. Only one of `privateNetwork` and `publicNetwork` may be set.
     * > The `publicNetwork` block exports:
     */
    publicNetwork?: pulumi.Input<inputs.redis.ClusterPublicNetwork>;
    /**
     * Map of settings for Redis™ cluster. Available settings can be found by listing Redis™ versions
     * with scaleway API or CLI
     */
    settings?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * The tags associated with the Redis™ cluster.
     */
    tags?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Whether TLS is enabled or not.
     *
     * > The changes on `tlsEnabled` will force the resource creation.
     */
    tlsEnabled?: pulumi.Input<boolean>;
    /**
     * The date and time of the last update of the Redis™ cluster.
     */
    updatedAt?: pulumi.Input<string>;
    /**
     * Identifier for the first user of the Redis™ cluster.
     */
    userName?: pulumi.Input<string>;
    /**
     * Redis™ cluster's version (e.g. `6.2.7`).
     *
     * > **Important:** Updates to `version` will migrate the Redis™ cluster to the desired `version`. Keep in mind that you
     * cannot downgrade a Redis™ cluster.
     */
    version?: pulumi.Input<string>;
    /**
     * `zone`) The zone in which the
     * Redis™ cluster should be created.
     */
    zone?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a Cluster resource.
 */
export interface ClusterArgs {
    /**
     * List of acl rules, this is cluster's authorized IPs. More details on the ACL section.
     */
    acls?: pulumi.Input<pulumi.Input<inputs.redis.ClusterAcl>[]>;
    /**
     * The number of nodes in the Redis™ cluster.
     *
     * > **Important:**
     *
     * - Cluster_size = 1 for Standalone mode (single node).
     *
     * - Cluster_size = 2 for High Availability (HA) mode, with 1 main node and 1 standby node.
     *
     * - Cluster_size >= 3 for Cluster mode, which requires a minimum of 1 main node and 2 secondary nodes.
     *
     * > **Important:** If you are using the cluster mode (>=3 nodes), you can set a bigger `clusterSize` than you initially
     * did, it will migrate the Redis™ cluster but keep in mind that you cannot downgrade a Redis™ cluster, so setting a smaller
     * `clusterSize` will destroy and recreate your cluster.
     *
     * > **Important:** If you are using the Standalone mode (1 node), setting a bigger `clusterSize` will destroy and
     * recreate your cluster as you will be switching to the cluster mode.
     */
    clusterSize?: pulumi.Input<number>;
    /**
     * The name of the Redis™ cluster.
     */
    name?: pulumi.Input<string>;
    /**
     * The type of Redis™ cluster you want to create (e.g. `RED1-M`).
     *
     * > **Important:** Updates to `nodeType` will migrate the Redis™ cluster to the desired `nodeType`. Keep in mind that
     * you cannot downgrade a Redis™ cluster.
     */
    nodeType: pulumi.Input<string>;
    /**
     * Password for the first user of the Redis™ cluster. Only one of `password` or `passwordWo` should be specified.
     */
    password?: pulumi.Input<string>;
    /**
     * **NOTE:** This field is write-only and its value will not be updated in state as part of read operations.
     */
    passwordWo?: pulumi.Input<string>;
    /**
     * The version of the write-only password. To update the `passwordWo`, you must also update the `passwordWoVersion`.
     */
    passwordWoVersion?: pulumi.Input<number>;
    /**
     * The list of private IPv4 addresses associated with the resource.
     */
    privateIps?: pulumi.Input<pulumi.Input<inputs.redis.ClusterPrivateIp>[]>;
    /**
     * Describes the Private Network you want to connect to your cluster. If not set, a public
     * network will be provided. More details on the Private Network section
     */
    privateNetworks?: pulumi.Input<pulumi.Input<inputs.redis.ClusterPrivateNetwork>[]>;
    /**
     * `projectId`) The ID of the project the Redis™ cluster is
     * associated with.
     */
    projectId?: pulumi.Input<string>;
    /**
     * (Optional) Public network details. Only one of `privateNetwork` and `publicNetwork` may be set.
     * > The `publicNetwork` block exports:
     */
    publicNetwork?: pulumi.Input<inputs.redis.ClusterPublicNetwork>;
    /**
     * Map of settings for Redis™ cluster. Available settings can be found by listing Redis™ versions
     * with scaleway API or CLI
     */
    settings?: pulumi.Input<{[key: string]: pulumi.Input<string>}>;
    /**
     * The tags associated with the Redis™ cluster.
     */
    tags?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * Whether TLS is enabled or not.
     *
     * > The changes on `tlsEnabled` will force the resource creation.
     */
    tlsEnabled?: pulumi.Input<boolean>;
    /**
     * Identifier for the first user of the Redis™ cluster.
     */
    userName: pulumi.Input<string>;
    /**
     * Redis™ cluster's version (e.g. `6.2.7`).
     *
     * > **Important:** Updates to `version` will migrate the Redis™ cluster to the desired `version`. Keep in mind that you
     * cannot downgrade a Redis™ cluster.
     */
    version: pulumi.Input<string>;
    /**
     * `zone`) The zone in which the
     * Redis™ cluster should be created.
     */
    zone?: pulumi.Input<string>;
}
