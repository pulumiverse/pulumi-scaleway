// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "../types/input";
import * as outputs from "../types/output";
import * as utilities from "../utilities";

/**
 * Creates and manages Scaleway Site-to-Site VPN Connections.
 * A connection links a Scaleway VPN Gateway to a Customer Gateway and establishes an IPSec tunnel with BGP routing.
 *
 * For more information, see [the main documentation](https://www.scaleway.com/en/docs/site-to-site-vpn/reference-content/understanding-s2svpn/).
 *
 * ## Example Usage
 *
 * ### Basic Connection
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as scaleway from "@pulumiverse/scaleway";
 *
 * const vpc = new scaleway.network.Vpc("vpc", {name: "my-vpc"});
 * const pn = new scaleway.network.PrivateNetwork("pn", {
 *     name: "my-private-network",
 *     vpcId: vpc.id,
 *     ipv4Subnet: {
 *         subnet: "10.0.1.0/24",
 *     },
 * });
 * const gateway = new scaleway.s2svpn.Gateway("gateway", {
 *     name: "my-vpn-gateway",
 *     gatewayType: "VGW-S",
 *     privateNetworkId: pn.id,
 * });
 * const customerGw = new scaleway.s2svpn.CustomerGateway("customer_gw", {
 *     name: "my-customer-gateway",
 *     ipv4Public: "203.0.113.1",
 *     asn: 65000,
 * });
 * const policy = new scaleway.s2svpn.RoutingPolicy("policy", {
 *     name: "my-routing-policy",
 *     prefixFilterIns: ["10.0.2.0/24"],
 *     prefixFilterOuts: ["10.0.1.0/24"],
 * });
 * const main = new scaleway.s2svpn.Connection("main", {
 *     name: "my-vpn-connection",
 *     vpnGatewayId: gateway.id,
 *     customerGatewayId: customerGw.id,
 *     initiationPolicy: "customer_gateway",
 *     enableRoutePropagation: true,
 *     bgpConfigIpv4s: [{
 *         routingPolicyId: policy.id,
 *         privateIp: "169.254.0.1/30",
 *         peerPrivateIp: "169.254.0.2/30",
 *     }],
 *     ikev2Ciphers: [{
 *         encryption: "aes256",
 *         integrity: "sha256",
 *         dhGroup: "modp2048",
 *     }],
 *     espCiphers: [{
 *         encryption: "aes256",
 *         integrity: "sha256",
 *         dhGroup: "modp2048",
 *     }],
 * });
 * ```
 *
 * ## Import
 *
 * Connections can be imported using `{region}/{id}`, e.g.
 *
 * bash
 *
 * ```sh
 * $ pulumi import scaleway:s2svpn/connection:Connection main fr-par/11111111-1111-1111-1111-111111111111
 * ```
 */
export class Connection extends pulumi.CustomResource {
    /**
     * Get an existing Connection resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ConnectionState, opts?: pulumi.CustomResourceOptions): Connection {
        return new Connection(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'scaleway:s2svpn/connection:Connection';

    /**
     * Returns true if the given object is an instance of Connection.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is Connection {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === Connection.__pulumiType;
    }

    /**
     * BGP configuration for IPv4. See BGP Config below.
     */
    declare public readonly bgpConfigIpv4s: pulumi.Output<outputs.s2svpn.ConnectionBgpConfigIpv4[]>;
    /**
     * BGP configuration for IPv6. See BGP Config below.
     */
    declare public readonly bgpConfigIpv6s: pulumi.Output<outputs.s2svpn.ConnectionBgpConfigIpv6[]>;
    /**
     * The BGP IPv4 session information. See BGP Session below.
     */
    declare public /*out*/ readonly bgpSessionIpv4s: pulumi.Output<outputs.s2svpn.ConnectionBgpSessionIpv4[]>;
    /**
     * The BGP IPv6 session information. See BGP Session below.
     */
    declare public /*out*/ readonly bgpSessionIpv6s: pulumi.Output<outputs.s2svpn.ConnectionBgpSessionIpv6[]>;
    /**
     * The status of the BGP IPv4 session.
     */
    declare public /*out*/ readonly bgpStatusIpv4: pulumi.Output<string>;
    /**
     * The status of the BGP IPv6 session.
     */
    declare public /*out*/ readonly bgpStatusIpv6: pulumi.Output<string>;
    /**
     * The date and time of the creation of the connection (RFC 3339 format).
     */
    declare public /*out*/ readonly createdAt: pulumi.Output<string>;
    /**
     * The ID of the customer gateway to attach to the connection.
     */
    declare public readonly customerGatewayId: pulumi.Output<string>;
    /**
     * Defines whether route propagation is enabled or not.
     */
    declare public readonly enableRoutePropagation: pulumi.Output<boolean>;
    /**
     * ESP cipher configuration for Phase 2 (data encryption). See Cipher Config below.
     */
    declare public readonly espCiphers: pulumi.Output<outputs.s2svpn.ConnectionEspCipher[]>;
    /**
     * IKEv2 cipher configuration for Phase 1 (tunnel establishment). See Cipher Config below.
     */
    declare public readonly ikev2Ciphers: pulumi.Output<outputs.s2svpn.ConnectionIkev2Cipher[]>;
    /**
     * Defines who initiates the IPSec tunnel.
     */
    declare public readonly initiationPolicy: pulumi.Output<string>;
    /**
     * Defines IP version of the IPSec Tunnel. Defaults to `false` (IPv4).
     */
    declare public readonly isIpv6: pulumi.Output<boolean>;
    /**
     * The name of the connection.
     */
    declare public readonly name: pulumi.Output<string>;
    /**
     * The Organization ID the connection is associated with.
     */
    declare public /*out*/ readonly organizationId: pulumi.Output<string>;
    /**
     * `projectId`) The ID of the project the connection is associated with.
     */
    declare public readonly projectId: pulumi.Output<string>;
    /**
     * `region`) The region in which the connection should be created.
     */
    declare public readonly region: pulumi.Output<string | undefined>;
    /**
     * Whether route propagation is enabled.
     */
    declare public /*out*/ readonly routePropagationEnabled: pulumi.Output<boolean>;
    /**
     * The ID of the secret containing the pre-shared key (PSK) for the connection.
     */
    declare public /*out*/ readonly secretId: pulumi.Output<string>;
    /**
     * The version of the secret containing the PSK.
     */
    declare public /*out*/ readonly secretVersion: pulumi.Output<number>;
    /**
     * The status of the connection.
     */
    declare public /*out*/ readonly status: pulumi.Output<string>;
    /**
     * The list of tags to apply to the connection.
     */
    declare public readonly tags: pulumi.Output<string[] | undefined>;
    /**
     * The status of the IPSec tunnel.
     */
    declare public /*out*/ readonly tunnelStatus: pulumi.Output<string>;
    /**
     * The date and time of the last update of the connection (RFC 3339 format).
     */
    declare public /*out*/ readonly updatedAt: pulumi.Output<string>;
    /**
     * The ID of the VPN gateway to attach to the connection.
     */
    declare public readonly vpnGatewayId: pulumi.Output<string>;

    /**
     * Create a Connection resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args?: ConnectionArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ConnectionArgs | ConnectionState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ConnectionState | undefined;
            resourceInputs["bgpConfigIpv4s"] = state?.bgpConfigIpv4s;
            resourceInputs["bgpConfigIpv6s"] = state?.bgpConfigIpv6s;
            resourceInputs["bgpSessionIpv4s"] = state?.bgpSessionIpv4s;
            resourceInputs["bgpSessionIpv6s"] = state?.bgpSessionIpv6s;
            resourceInputs["bgpStatusIpv4"] = state?.bgpStatusIpv4;
            resourceInputs["bgpStatusIpv6"] = state?.bgpStatusIpv6;
            resourceInputs["createdAt"] = state?.createdAt;
            resourceInputs["customerGatewayId"] = state?.customerGatewayId;
            resourceInputs["enableRoutePropagation"] = state?.enableRoutePropagation;
            resourceInputs["espCiphers"] = state?.espCiphers;
            resourceInputs["ikev2Ciphers"] = state?.ikev2Ciphers;
            resourceInputs["initiationPolicy"] = state?.initiationPolicy;
            resourceInputs["isIpv6"] = state?.isIpv6;
            resourceInputs["name"] = state?.name;
            resourceInputs["organizationId"] = state?.organizationId;
            resourceInputs["projectId"] = state?.projectId;
            resourceInputs["region"] = state?.region;
            resourceInputs["routePropagationEnabled"] = state?.routePropagationEnabled;
            resourceInputs["secretId"] = state?.secretId;
            resourceInputs["secretVersion"] = state?.secretVersion;
            resourceInputs["status"] = state?.status;
            resourceInputs["tags"] = state?.tags;
            resourceInputs["tunnelStatus"] = state?.tunnelStatus;
            resourceInputs["updatedAt"] = state?.updatedAt;
            resourceInputs["vpnGatewayId"] = state?.vpnGatewayId;
        } else {
            const args = argsOrState as ConnectionArgs | undefined;
            resourceInputs["bgpConfigIpv4s"] = args?.bgpConfigIpv4s;
            resourceInputs["bgpConfigIpv6s"] = args?.bgpConfigIpv6s;
            resourceInputs["customerGatewayId"] = args?.customerGatewayId;
            resourceInputs["enableRoutePropagation"] = args?.enableRoutePropagation;
            resourceInputs["espCiphers"] = args?.espCiphers;
            resourceInputs["ikev2Ciphers"] = args?.ikev2Ciphers;
            resourceInputs["initiationPolicy"] = args?.initiationPolicy;
            resourceInputs["isIpv6"] = args?.isIpv6;
            resourceInputs["name"] = args?.name;
            resourceInputs["projectId"] = args?.projectId;
            resourceInputs["region"] = args?.region;
            resourceInputs["tags"] = args?.tags;
            resourceInputs["vpnGatewayId"] = args?.vpnGatewayId;
            resourceInputs["bgpSessionIpv4s"] = undefined /*out*/;
            resourceInputs["bgpSessionIpv6s"] = undefined /*out*/;
            resourceInputs["bgpStatusIpv4"] = undefined /*out*/;
            resourceInputs["bgpStatusIpv6"] = undefined /*out*/;
            resourceInputs["createdAt"] = undefined /*out*/;
            resourceInputs["organizationId"] = undefined /*out*/;
            resourceInputs["routePropagationEnabled"] = undefined /*out*/;
            resourceInputs["secretId"] = undefined /*out*/;
            resourceInputs["secretVersion"] = undefined /*out*/;
            resourceInputs["status"] = undefined /*out*/;
            resourceInputs["tunnelStatus"] = undefined /*out*/;
            resourceInputs["updatedAt"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(Connection.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering Connection resources.
 */
export interface ConnectionState {
    /**
     * BGP configuration for IPv4. See BGP Config below.
     */
    bgpConfigIpv4s?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionBgpConfigIpv4>[]>;
    /**
     * BGP configuration for IPv6. See BGP Config below.
     */
    bgpConfigIpv6s?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionBgpConfigIpv6>[]>;
    /**
     * The BGP IPv4 session information. See BGP Session below.
     */
    bgpSessionIpv4s?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionBgpSessionIpv4>[]>;
    /**
     * The BGP IPv6 session information. See BGP Session below.
     */
    bgpSessionIpv6s?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionBgpSessionIpv6>[]>;
    /**
     * The status of the BGP IPv4 session.
     */
    bgpStatusIpv4?: pulumi.Input<string>;
    /**
     * The status of the BGP IPv6 session.
     */
    bgpStatusIpv6?: pulumi.Input<string>;
    /**
     * The date and time of the creation of the connection (RFC 3339 format).
     */
    createdAt?: pulumi.Input<string>;
    /**
     * The ID of the customer gateway to attach to the connection.
     */
    customerGatewayId?: pulumi.Input<string>;
    /**
     * Defines whether route propagation is enabled or not.
     */
    enableRoutePropagation?: pulumi.Input<boolean>;
    /**
     * ESP cipher configuration for Phase 2 (data encryption). See Cipher Config below.
     */
    espCiphers?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionEspCipher>[]>;
    /**
     * IKEv2 cipher configuration for Phase 1 (tunnel establishment). See Cipher Config below.
     */
    ikev2Ciphers?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionIkev2Cipher>[]>;
    /**
     * Defines who initiates the IPSec tunnel.
     */
    initiationPolicy?: pulumi.Input<string>;
    /**
     * Defines IP version of the IPSec Tunnel. Defaults to `false` (IPv4).
     */
    isIpv6?: pulumi.Input<boolean>;
    /**
     * The name of the connection.
     */
    name?: pulumi.Input<string>;
    /**
     * The Organization ID the connection is associated with.
     */
    organizationId?: pulumi.Input<string>;
    /**
     * `projectId`) The ID of the project the connection is associated with.
     */
    projectId?: pulumi.Input<string>;
    /**
     * `region`) The region in which the connection should be created.
     */
    region?: pulumi.Input<string>;
    /**
     * Whether route propagation is enabled.
     */
    routePropagationEnabled?: pulumi.Input<boolean>;
    /**
     * The ID of the secret containing the pre-shared key (PSK) for the connection.
     */
    secretId?: pulumi.Input<string>;
    /**
     * The version of the secret containing the PSK.
     */
    secretVersion?: pulumi.Input<number>;
    /**
     * The status of the connection.
     */
    status?: pulumi.Input<string>;
    /**
     * The list of tags to apply to the connection.
     */
    tags?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The status of the IPSec tunnel.
     */
    tunnelStatus?: pulumi.Input<string>;
    /**
     * The date and time of the last update of the connection (RFC 3339 format).
     */
    updatedAt?: pulumi.Input<string>;
    /**
     * The ID of the VPN gateway to attach to the connection.
     */
    vpnGatewayId?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a Connection resource.
 */
export interface ConnectionArgs {
    /**
     * BGP configuration for IPv4. See BGP Config below.
     */
    bgpConfigIpv4s?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionBgpConfigIpv4>[]>;
    /**
     * BGP configuration for IPv6. See BGP Config below.
     */
    bgpConfigIpv6s?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionBgpConfigIpv6>[]>;
    /**
     * The ID of the customer gateway to attach to the connection.
     */
    customerGatewayId?: pulumi.Input<string>;
    /**
     * Defines whether route propagation is enabled or not.
     */
    enableRoutePropagation?: pulumi.Input<boolean>;
    /**
     * ESP cipher configuration for Phase 2 (data encryption). See Cipher Config below.
     */
    espCiphers?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionEspCipher>[]>;
    /**
     * IKEv2 cipher configuration for Phase 1 (tunnel establishment). See Cipher Config below.
     */
    ikev2Ciphers?: pulumi.Input<pulumi.Input<inputs.s2svpn.ConnectionIkev2Cipher>[]>;
    /**
     * Defines who initiates the IPSec tunnel.
     */
    initiationPolicy?: pulumi.Input<string>;
    /**
     * Defines IP version of the IPSec Tunnel. Defaults to `false` (IPv4).
     */
    isIpv6?: pulumi.Input<boolean>;
    /**
     * The name of the connection.
     */
    name?: pulumi.Input<string>;
    /**
     * `projectId`) The ID of the project the connection is associated with.
     */
    projectId?: pulumi.Input<string>;
    /**
     * `region`) The region in which the connection should be created.
     */
    region?: pulumi.Input<string>;
    /**
     * The list of tags to apply to the connection.
     */
    tags?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * The ID of the VPN gateway to attach to the connection.
     */
    vpnGatewayId?: pulumi.Input<string>;
}
